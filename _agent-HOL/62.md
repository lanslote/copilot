---
title: 6-2. (옵션)사용자 지정 커넥터 만들기
layout: default
nav_enabled: true
nav_order: 62
has_toc: true
parent: 6. [코파일럿스튜디오]<br/>&nbsp;&nbsp;&nbsp;외부 API 연동하는 에이전트
---

<details open markdown="block">
  <summary>
    Table of contents
  </summary>
  {: .text-delta }
- TOC
{:toc}
</details>

---
{: .highlight }
> 이번 장에서는 코파일럿 스튜디오로 만든 에이전트를 수정하여 업데이트하는 내용을 살펴보겠습니다.

{: .note }
> 이 강의는 앞서 진행한 [6-1 Copilot Agents]에서 사용한 JSON 파일을 만들기 위한 강의 입니다.<br/>
> 이 강의는 **사용자 선택** 사항으로 반드시 진행을 하실 필요는 없지만, 사용자 지정 커넥터 이해를 위해 따라해볼 것을 권장합니다<br/>
> 이 강의는 REST API를 사용하여 생성하는 방법을 설명하고 있습니다.<br/>
> 


# (옵션)사용자 지정 커넥터 만들기

이번 장에서는 Power Automate 또는 Power Apps를 사용하여 [사용자 지정 커넥터]를 만드는 방법에 대해 알아보겠습니다.

샘플로 사용하는 REST API는 CoinCap API 2.0을 사용합니다. 이 API는 인증이 필요 없는 Nokey 형식이며, 간단한 형태의 API이기 때문에 예제로 선정하였습니다.
CoinCap API 2.0에 대한 정보는 다음 사이트를 참조하여 주시기 바랍니다.
[CoinCap 바로가기](https://docs.coincap.io/ "CoinCap API 바로가기") 

---

Microsoft 365 Portal에서 좌측 상단을 클릭하여[**Power Automate**] 또는 [**Power Apps**] 앱 사이트로 이동 합니다. 또는 아래 주소로 직접 접속을 진행합니다.

|App Name|Site|
|---|---|
|Power Automate| https://make.powerautomate.com/|
|Power Apps| https://make.powerapps.com/|


![이미지](../assets/60/62_00.png)

---

[**더보기**]를 눌러서 [**모두 살펴보기**]를 선택합니다.

![이미지](../assets/60/62_01.png)

---

오른쪽 패널에서 [**사용자 지정 커넥터**]를 선택합니다.

![이미지](../assets/60/62_02.png)

---

사용자 지정 커넥터 페이지에서 [**새 사용자 지정 커넥터**]를 선택한 후 [**처음부터 만들기**]를 실행합니다.

![이미지](../assets/60/62_03.png)

---

[**커넥터 이름**]을 지정하여 주시기 바랍니다. 커넥터 이름은 사용자가 원하는 이름으로 지정을 하실 수 있습니다. 아래 예시에서는 CoinCap API를 사용하기 때문에 **CoinCap**으로 지정을 하였습니다.

![이미지](../assets/60/62_04.png)

---

[**일반 정보**]에서는 커넥터 아이콘을 추가하실 수 있으며, 아이콘의 배경색 또한 지정을 하실 수 있습니다. 설명은 만들고자 하는 커넥터가 하는 역할에 대한 설명을 해주시면 됩니다.

**참고** 설명은 반드시 30자 이상으로 작성을 해야만 합니다.

[**호스트**]는 CoinCap Sample 주소인 **api.coincap.io**를 입력하였습니다.

[**기준 URL**]은 Rest API 주소인 **/v/assets/**을 입력하였습니다. 

![이미지](../assets/60/62_05.png)

---

[**인증 형식**]은 실습을 쉽게하기 위해 No Key 형태의 Sample Rest API 사용하였습니다. 그렇기 때문에 **인증 없음**(No Key)로 설정을 하였습니다. 
여기서는 설명드리지 않았지만 실제로 사용자 환경의 Rest API를 사용할 때는 Oauth와 같은 형태의 인증이 필요함을 안내 드립니다.

![이미지](../assets/60/62_06.png)

---

왼쪽 패널에서 [**새 동작**]을 선택합니다. 그리고 오른쪽 [**일반**]에서 값들을 추가합니다. 일반에 대한 내용은 아래를 참조하여 주시기 바랍니다.

|속성|설명|
|---|---|
|**요약**| Copilot Agent의 작업에서 [**사용자 지정 커넥터**]를 검색 시 나타나는 이름입니다|
|**설명**| Copilot Agent에서 사용자 지정 커넥터가 실행 될 때를 알게하는 지침입니다|
|**작업 ID**| 고유의 값으로 해당 사용자 지정 커넥터의 고유 번호입니다|
||**중요** **작업 ID**는 반드시 대문자로 시작을 해야만 합니다|
|**표시 여부**| None으로 설정을 진행합니다|

![이미지](../assets/60/62_07.png)

---

[**요청**]은 다음과 같이 진행을 합니다. [**샘플에서 가져오기**]를 선택합니다.

[샘플에서 가져오기] 탭에서 [**동사**]는 **GET**을 선택한 후, [**URL**]은 샘플 API 주소 **https://api.coincap.io/v2/assets/{id}**를 입력합니다.
[**참고**] {id}는 API에서 제공하는 Spec이 아닌 [사용자 지정 커넥트]에서 사용하는 매개 변수 형태로 정의를 하였습니다.

[**가져오기**]를 선택하시면 왼쪽 화면과 같이 **id**가 매개 변수 값으로 선택된 것을 볼 수 있습니다.

![이미지](../assets/60/62_09.png)

---

[**응답**]은 default 값을 선택합니다.

![이미지](../assets/60/62_10.png)

---

[**샘플에서 가져오기**]를 선택합니다. 그 다음 오른쯕 탭에서 [**본문**]에 응답 형태의 Sample을 입력합니다.

Sample은 CoinCap API를 통해 호출한 JSON 값을 입력합니다. 아래 Sample Json을 복사하여 붙여 넣기하여 주시기 바랍니다.

[**가져오기**]를 진행합니다.

``` json
{
    "data": {
        "id": "bitcoin",
        "rank": "1",
        "symbol": "BTC",
        "name": "Bitcoin",
        "supply": "19789878.0000000000000000",
        "maxSupply": "21000000.0000000000000000",
        "marketCapUsd": "1925401610597.9043097936920936",
        "volumeUsd24Hr": "8441577875.6111783305066112",
        "priceUsd": "97292.2425594490430812",
        "changePercent24Hr": "0.6674269326974169",
        "vwap24Hr": "96617.9649534083881735",
        "explorer": "https://blockchain.info/"
    },
    "timestamp": 1733060482784
}
```

![이미지](../assets/60/62_12.png)

---

가져오기가 끝나면 아래와 같이 **본문**에 JSON으로 받은 응답 값이 나타나는 것을 확인할 수 있습니다. 이름은 **default**로 지정하였지만, 다른 이름으로 지정을 하는 것도 가능합니다.

![이미지](../assets/60/62_13.png)

---

[**유효성 검사**]에서 문제가 없다면 다음으로 진행을 합니다.

![이미지](../assets/60/62_14.png)

---

플러그 인 매니페스트는 사용을 하지 않기에 다음으로 진행을 합니다.

![이미지](../assets/60/62_15.png)

---

코드 또한 사용을 하지 않기 때문에 테스트로 넘어갑니다.

![이미지](../assets/60/62_16.png)

---

테스트 진행에 앞서 우측 상단의 [**커넥터 만들기**]를 통해 커넥터 생성을 진행합니다.

![이미지](../assets/60/62_17.png)

---

[**연결**]에서 **새 연결**을 선택합니다.

![이미지](../assets/60/62_18.png)

---

아래와 같이 화면이 나타나면 **만들기**를 진행합니다.

![이미지](../assets/60/62_19.png)

---

만들기가 완료 되면 아래와 같이 커넥터가 생성된 것을 확인할 수 있습니다.

![이미지](../assets/60/62_20.png)

---

커넥터가 생성이 완료 되었다면, 다시 테스트로 이동을 하여 생성 된 커넥터를 [**선택한 연결**]에서 맵핑을 진행합니다. 그리고 앞에서 지정한 매개 변수인 [**id**]에 **bitcoin**를 입력하여 [**테스트 작업**]을 실행합니다. 결과의 **응답**에서 입력한 코인 정보를 정상적으로 가져왔는지 확인합니다.

![이미지](../assets/60/62_21.png)

---

생성 된 사용자 지정 커넥터에서 아래와 같이 **다운로드 버튼(↓)**을 선택하면 아래와 같이 커넥터의 Manifest JSON 파일을 생성하실 수 있습니다.

![이미지](../assets/60/62_22.png)

![이미지](../assets/60/62_23.png)

---

여기까지 사용자 지정 커넥터 만들기 전체 과정이었습니다. 샘플에서는 공개 된 API를 사용하였지만, 실제로 고객사에서 사용하는 시스템에서 REST API가 구현되어 있다면 이와 같은 방법으로 사용자 지정 커넥터를 생성하여 여러가지 데이터를 가지고 오실 수 있습니다. 